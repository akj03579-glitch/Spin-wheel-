<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shareable Spin Wheel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f5f5f5;
  margin: 0;
  padding: 20px;
}
h1 { margin-bottom: 10px; }
textarea {
  width: 100%;
  max-width: 400px;
  height: 80px;
}
canvas {
  margin-top: 20px;
  background: white;
  border-radius: 50%;
}
button {
  margin: 10px;
  padding: 12px 20px;
  font-size: 16px;
}
#result {
  font-size: 20px;
  margin-top: 15px;
  font-weight: bold;
}
</style>
</head>

<body>
<h1>ðŸŽ¡ Spin the Wheel</h1>
<p>Enter options (one per line)</p>

<textarea id="options">Option 1
Option 2
Option 3
Option 4</textarea><br>

<button onclick="spin()">SPIN</button>
<button onclick="shareResult()">SHARE RESULT</button>

<canvas id="wheel" width="300" height="300"></canvas>
<div id="result"></div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
let options = [];
let angle = 0;

function drawWheel() {
  ctx.clearRect(0, 0, 300, 300);
  if (options.length === 0) return;
  const slice = 2 * Math.PI / options.length;
  options.forEach((opt, i) => {
    ctx.beginPath();
    ctx.fillStyle = `hsl(${i * 360 / options.length}, 70%, 60%)`;
    ctx.moveTo(150, 150);
    ctx.arc(150, 150, 150, angle + i * slice, angle + (i + 1) * slice);
    ctx.fill();
    ctx.save();
    ctx.translate(150, 150);
    ctx.rotate(angle + (i + 0.5) * slice);
    ctx.fillStyle = "#000";
    ctx.fillText(opt, 80, 5);
    ctx.restore();
  });
}

function spin() {
  options = document.getElementById("options").value.split("\n").filter(o => o.trim());
  if (options.length < 2) return alert("Add at least 2 options");
  let spinAngle = Math.random() * 2000 + 2000;
  let start = angle;
  let startTime = null;

  function animate(time) {
    if (!startTime) startTime = time;
    let progress = time - startTime;
    angle = start + spinAngle * Math.exp(-progress / 2000);
    drawWheel();
    if (progress < 3000) {
      requestAnimationFrame(animate);
    } else {
      let slice = 2 * Math.PI / options.length;
      let index = Math.floor(((2 * Math.PI - angle % (2 * Math.PI)) / slice)) % options.length;
      document.getElementById("result").innerText = "Result: " + options[index];
    }
  }
  requestAnimationFrame(animate);
}

function shareResult() {
  const text = document.getElementById("result").innerText;
  if (!text) return alert("Spin first!");
  if (navigator.share) {
    navigator.share({
      title: "Spin Wheel Result",
      text: text,
      url: location.href
    });
  } else {
    alert("Sharing not supported");
  }
}
</script>
</body>
</html>
